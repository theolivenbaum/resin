@model Sir.HttpServer.Controllers.CreateModel
@{
    Layout = "~/Views/_LayoutStart.cshtml";
    ViewBag.Title = "Create your own personal search engine - CrawlCrawler";
}
@{
    var urlList = Context.Request.Query["urls"].ToList();

    if (urlList.Count == 0)
    {
        urlList.Add("site://en.wikipedia.org/");
    }

    var queryString = Context.Request.QueryString.ToString();

    if (!queryString.StartsWith("?"))
    {
        queryString = $"?{queryString}";
    }
}
<div id="create-collection-form">
    <form action="/addurl" method="get">

        <span class="intro">A pay-as-you-go search service</span>
        <h1>Create your own personal search engine</h1>
        <p>
            Add some of your favorite pages and sites to a search index that you command over.
            You can add more sites and pages later and you can easily exclude that which you are not interested in.
        </p>
        <h2>Add URL</h2>
        <p>
            <label>
                <input type="radio" id="scope" name="scope" value="page" checked />
                Single page
            </label>
            <label>
                <input type="radio" id="scope" name="scope" value="site" />
                Site or directory
            </label>
        </p>
        <div>
            @if (Model != null && Model.ErrorMessage != null)
            {
            <div><span style="background-color:orangered;font-size:10pt;">@Model.ErrorMessage</span></div>
            }
            <label>
                <input type="text" placeholder="Enter URL here, e.g. https://mysite.com" id="siteurl" name="url" /><input type="submit" value="Add" name="add" id="add" />
            </label>
            <div id="sitelist">
                @foreach (var url in urlList)
                {
                    var href = $"/deleteurl{queryString}&url={url}";
                    <a href="@href">@url</a><br />
                }
            </div>
        </div>
        @foreach (var url in urlList)
        {
            <input type="hidden" name="urls" value="@url" />
        }
    </form>
    <form action="/createindex" method="post">
        <p>
            <label>
                <input type="checkbox" name="agree" id="agree" value="yes" />
                I have read and agree to the <a href="/terms">terms of use</a>.
            </label>
        </p>
        <p>
            <input type="submit" id="create" name="create" value="Create search index" />
        </p>
        @foreach (var url in urlList)
        {
            <input type="hidden" name="urls" value="@url" />
        }
    </form>
</div>